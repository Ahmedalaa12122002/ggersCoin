<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinHive</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:system-ui;
}

body{
  background:#000;
  color:#fff;
  overflow:hidden;
}

/* ===== CONTENT ===== */
#content{
  height:calc(100vh - 110px);
  padding:15px;
  overflow:auto;
}

/* ===== NAV BAR ===== */
.nav-bar{
  position:fixed;
  bottom:0;
  width:100%;
  height:110px;
  background:rgba(15,15,15,.96);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid #222;
}

/* ===== NAV BUTTON ===== */
.nav-btn{
  width:56px;
  height:56px;
  border-radius:50%;
  background:#141414;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:#aaa;
  font-size:11px;
  transition:.25s;
}

.nav-btn span{
  font-size:18px;
}

/* ===== HOME BUTTON ===== */
.nav-btn.home{
  width:78px;
  height:78px;
  margin-top:-18px;
}

.nav-btn.home span{
  font-size:28px;
}

/* ===== ACTIVE ===== */
.nav-btn.active{
  color:#fff;
  box-shadow:0 0 16px rgba(255,200,0,.35);
}
</style>
</head>

<body>

<!-- ===== MAIN CONTENT ===== -->
<div id="content"></div>

<!-- ===== NAV BAR ===== -->
<div class="nav-bar">

  <div class="nav-btn" onclick="goPage('settings',this)">
    <span>âš™ï¸</span>
    Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
  </div>

  <div class="nav-btn" onclick="goPage('vip',this)">
    <span>â­</span>
    VIP
  </div>

  <div class="nav-btn" onclick="goPage('wallet',this)">
    <span>ğŸ’¼</span>
    Ø§Ù„Ù…Ø­ÙØ¸Ø©
  </div>

  <div class="nav-btn home active" onclick="goPage('home',this)">
    <span>ğŸ </span>
    Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  </div>

  <div class="nav-btn" onclick="goPage('tasks',this)">
    <span>ğŸ“‹</span>
    Ø§Ù„Ù…Ù‡Ø§Ù…
  </div>

  <div class="nav-btn" onclick="goPage('ref',this)">
    <span>ğŸ‘¥</span>
    Ø§Ù„Ø¥Ø­Ø§Ù„Ø©
  </div>

  <div class="nav-btn" onclick="goPage('logs',this)">
    <span>ğŸ§¾</span>
    Ø§Ù„Ø³Ø¬Ù„Ø§Øª
  </div>

</div>
<style>
/* ===== FARM UI ===== */
.farm{
  background:#0f0f0f;
  border-radius:18px;
  padding:15px;
  box-shadow:0 0 22px rgba(255,200,0,.15);
}

.farm-header{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
  font-size:14px;
}

.land-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
}

.land{
  background:#3b2a1a;
  border-radius:14px;
  height:95px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:22px;
  position:relative;
}

.land.locked{
  background:#1a1a1a;
  opacity:.5;
}

.land.ready{
  background:#f1c40f;
  color:#000;
}

.land .time{
  font-size:11px;
  margin-top:4px;
  opacity:.8;
}

/* ===== CROP MENU ===== */
#cropMenu{
  position:fixed;
  bottom:110px;
  left:0; right:0;
  background:#111;
  padding:15px;
  border-radius:20px 20px 0 0;
  display:none;
  z-index:20;
}

.crop-btn{
  background:#1c1c1c;
  padding:12px;
  border-radius:14px;
  margin-bottom:8px;
  text-align:center;
  cursor:pointer;
}
</style>

<!-- ===== HOME PAGE CONTENT ===== -->
<div id="homePage" style="display:block">

  <div class="farm">
    <div class="farm-header">
      <div>ğŸ‘‘ VIP: <span id="vipLevel">0</span></div>
      <div>ğŸ’° Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="points">0</span></div>
    </div>

    <div class="land-grid" id="landGrid">
      <!-- Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ Ø³ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ Ø¨Ø§Ù„Ù€ JS -->
    </div>
  </div>

</div>

<!-- ===== CROP MENU ===== -->
<div id="cropMenu">
  <div class="crop-btn" onclick="selectCrop('wheat')">ğŸŒ¾ Ù‚Ù…Ø­ (5 Ø¯Ù‚Ø§Ø¦Ù‚)</div>
  <div class="crop-btn" onclick="selectCrop('carrot')">ğŸ¥• Ø¬Ø²Ø± (10 Ø¯Ù‚Ø§Ø¦Ù‚)</div>
  <div class="crop-btn" onclick="selectCrop('pepper')">ğŸŒ¶ï¸ ÙÙ„ÙÙ„ (15 Ø¯Ù‚ÙŠÙ‚Ø©)</div>
  <div class="crop-btn" onclick="closeCropMenu()">Ø¥Ù„ØºØ§Ø¡</div>
  </div>
  <script>
/* =========================
   TELEGRAM INIT
========================= */
if (window.Telegram && Telegram.WebApp) {
  Telegram.WebApp.ready();
}

/* =========================
   PAGE STATE
========================= */
let currentPage = "home";

/* =========================
   PLAYER STATE
========================= */
let state = JSON.parse(localStorage.getItem("winhive")) || {
  points: 0,
  vip: 0,
  lands: [
    {state:"empty", crop:null, end:0},
    {state:"locked", crop:null, end:0},
    {state:"locked", crop:null, end:0},
    {state:"locked", crop:null, end:0},
    {state:"locked", crop:null, end:0},
    {state:"locked", crop:null, end:0}
  ]
};

const crops = {
  wheat:  {name:"Ù‚Ù…Ø­ ğŸŒ¾", time:5, reward:5},
  carrot: {name:"Ø¬Ø²Ø± ğŸ¥•", time:10, reward:10},
  pepper: {name:"ÙÙ„ÙÙ„ ğŸŒ¶ï¸", time:15, reward:15}
};

let selectedLand = null;

/* =========================
   SAVE
========================= */
function save(){
  localStorage.setItem("winhive", JSON.stringify(state));
}

/* =========================
   NAVIGATION
========================= */
function goPage(page, el){
  currentPage = page;

  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');

  document.getElementById("content").innerHTML = "";

  if(page === "home"){
    document.getElementById("homePage").style.display = "block";
    renderFarm();
  }else{
    document.getElementById("homePage").style.display = "none";
    document.getElementById("content").innerHTML =
      `<div style="padding:20px">${page} â€” Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±</div>`;
  }
}

/* =========================
   FARM RENDER
========================= */
function renderFarm(){
  if(currentPage !== "home") return;

  document.getElementById("points").innerText = state.points;
  document.getElementById("vipLevel").innerText = state.vip;

  const grid = document.getElementById("landGrid");
  grid.innerHTML = "";

  state.lands.forEach((land,i)=>{
    const div = document.createElement("div");
    div.className = "land";

    if(i > state.vip){
      div.classList.add("locked");
      div.innerText = "ğŸ”’ VIP";
      grid.appendChild(div);
      return;
    }

    if(land.state === "empty"){
      div.innerHTML = "ğŸŒ±<div class='time'>Ø§Ø²Ø±Ø¹</div>";
      div.onclick = ()=>openCropMenu(i);
    }
    else if(land.state === "planted"){
      const left = Math.ceil((land.end - Date.now())/1000);
      if(left <= 0){
        land.state = "ready";
        div.classList.add("ready");
        div.innerHTML = "ğŸŒ¾<div class='time'>Ø§Ø­ØµØ¯</div>";
        div.onclick = ()=>harvest(i);
      }else{
        div.innerHTML = "â³<div class='time'>"+left+"Ø«</div>";
      }
    }
    else if(land.state === "ready"){
      div.classList.add("ready");
      div.innerHTML = "ğŸŒ¾<div class='time'>Ø§Ø­ØµØ¯</div>";
      div.onclick = ()=>harvest(i);
    }

    grid.appendChild(div);
  });
}

/* =========================
   CROP MENU
========================= */
function openCropMenu(i){
  selectedLand = i;
  document.getElementById("cropMenu").style.display = "block";
}

function closeCropMenu(){
  document.getElementById("cropMenu").style.display = "none";
  selectedLand = null;
}

function selectCrop(type){
  if(selectedLand === null) return;

  const crop = crops[type];
  state.lands[selectedLand] = {
    state:"planted",
    crop:type,
    end: Date.now() + crop.time*60000
  };

  closeCropMenu();
  save();
  renderFarm();
}

/* =========================
   HARVEST
========================= */
function harvest(i){
  const crop = crops[state.lands[i].crop];
  state.points += crop.reward;
  state.lands[i] = {state:"empty", crop:null, end:0};
  save();
  renderFarm();
}

/* =========================
   AUTO UPDATE
========================= */
setInterval(renderFarm,1000);

/* =========================
   START
========================= */
renderFarm();
</script>

</body>
  </html>
  
