<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinHive</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:system-ui;
}

body{
  background:#000;
  color:#fff;
  overflow:hidden;
}

/* ===== CONTENT ===== */
#content{
  height:calc(100vh - 110px);
  padding:15px;
  overflow:auto;
}

/* ===== NAV BAR ===== */
.nav-bar{
  position:fixed;
  bottom:0;
  width:100%;
  height:110px;
  background:rgba(15,15,15,.97);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid #222;
}

/* ===== NAV BUTTON ===== */
.nav-btn{
  width:56px;
  height:56px;
  border-radius:50%;
  background:#141414;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:#aaa;
  font-size:11px;
  transition:.25s;
}

.nav-btn .icon{
  font-size:18px;
}

/* ===== HOME BUTTON ===== */
.home-btn{
  width:76px;
  height:76px;
  margin-top:-20px;
}

.home-btn .icon{
  font-size:28px;
}

/* ===== ACTIVE ===== */
.nav-btn.active{
  color:#fff;
  box-shadow:0 0 18px rgba(255,200,0,.35);
}

/* ===== UI CARDS ===== */
.card{
  background:#111;
  border-radius:18px;
  padding:15px;
  margin-bottom:15px;
  box-shadow:0 0 25px rgba(255,200,0,.12);
}

/* ===== FARM ===== */
.farm{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.plot{
  background:#1a1a1a;
  border-radius:14px;
  height:90px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:13px;
  cursor:pointer;
  position:relative;
}

.plot.locked{
  opacity:.35;
}

/* ===== PROGRESS ===== */
.progress{
  position:absolute;
  bottom:0;
  left:0;
  height:6px;
  background:#f1c40f;
  border-radius:0 0 14px 14px;
}
</style>
</head>

<body>

<div id="content"></div>
<div class="nav-bar">

  <div class="nav-btn" onclick="goPage('Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',this)">
    <div class="icon">âš™ï¸</div>
    Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
  </div>

  <div class="nav-btn" onclick="goPage('VIP',this)">
    <div class="icon">â­</div>
    VIP
  </div>

  <div class="nav-btn" onclick="goPage('Ø§Ù„Ù…Ø­ÙØ¸Ø©',this)">
    <div class="icon">ğŸ’¼</div>
    Ø§Ù„Ù…Ø­ÙØ¸Ø©
  </div>

  <div class="nav-btn home-btn active" onclick="goPage('Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',this)">
    <div class="icon">ğŸ </div>
    Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  </div>

  <div class="nav-btn" onclick="goPage('Ø§Ù„Ù…Ù‡Ø§Ù…',this)">
    <div class="icon">ğŸ“‹</div>
    Ø§Ù„Ù…Ù‡Ø§Ù…
  </div>

  <div class="nav-btn" onclick="goPage('Ø§Ù„Ø¥Ø­Ø§Ù„Ø©',this)">
    <div class="icon">ğŸ‘¥</div>
    Ø§Ù„Ø¥Ø­Ø§Ù„Ø©
  </div>

  <div class="nav-btn" onclick="goPage('Ø§Ù„Ø³Ø¬Ù„Ø§Øª',this)">
    <div class="icon">ğŸ§¾</div>
    Ø§Ù„Ø³Ø¬Ù„Ø§Øª
  </div>

    </div>
    <script>
Telegram.WebApp.ready();

/* ===== STATE ===== */
let state = JSON.parse(localStorage.getItem("winhive")) || {
  points:0,
  vip:0,
  plots:[
    {crop:null,end:0},
    {crop:null,end:0},
    {crop:null,end:0},
    {crop:null,end:0},
    {crop:null,end:0},
    {crop:null,end:0},
  ],
  task:{type:"harvest",target:5,progress:0,reward:50}
};

/* ===== CROPS ===== */
const crops={
  wheat:{name:"Ù‚Ù…Ø­",time:300},
  carrot:{name:"Ø¬Ø²Ø±",time:600},
  pepper:{name:"ÙÙ„ÙÙ„",time:900},
  grape:{name:"Ø¹Ù†Ø¨",time:1200},
  rocket:{name:"Ø¬Ø±Ø¬ÙŠØ±",time:1800},
};
    /* ===== PAGES ===== */
function renderHome(){
  let html=`
  <div class="card">ğŸ‘‘ VIP: ${state.vip} | ğŸ’° Ø§Ù„Ù†Ù‚Ø§Ø·: ${state.points}</div>

  <div class="card">
    <h3>ğŸŒ¾ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©</h3>
    <div class="farm" id="farm"></div>
  </div>

  <div class="card">
    ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:<br>
    Ø§Ø­ØµØ¯ ${state.task.target} Ù…Ø±Ø§Øª<br>
    Ø§Ù„ØªÙ‚Ø¯Ù…: ${state.task.progress}/${state.task.target}<br>
    Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©: ${state.task.reward} Ù†Ù‚Ø·Ø©
  </div>
  `;
  content.innerHTML=html;
  initFarm();
}

function renderSimple(text){
  content.innerHTML=`<div class="card">${text} (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)</div>`;
}

/* ===== NAV ===== */
function goPage(name,el){
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
  if(name==="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©") renderHome();
  else renderSimple(name);
}

/* ===== FARM ===== */
function initFarm(){
  const farm=document.getElementById("farm");
  if(!farm) return;
  farm.innerHTML="";
  state.plots.forEach((p,i)=>{
    const locked = i>0 && state.vip<i;
    const d=document.createElement("div");
    d.className="plot"+(locked?" locked":"");

    if(locked){
      d.innerText="ğŸ”’ VIP";
    }else if(!p.crop){
      d.innerText="â• Ø§Ø²Ø±Ø¹ Ù‚Ù…Ø­";
      d.onclick=()=>plant(i,"wheat");
    }else{
      const left=p.end-Date.now();
      if(left<=0){
        d.innerText="ğŸŒ¾ Ø§Ø­ØµØ¯";
        d.onclick=()=>harvest(i);
      }else{
        d.innerText=Math.ceil(left/1000)+"Ø«";
        const pr=document.createElement("div");
        pr.className="progress";
        pr.style.width=((1-left/p.time)*100)+"%";
        d.appendChild(pr);
      }
    }
    farm.appendChild(d);
  });
}

/* ===== ACTIONS ===== */
function plant(i,c){
  state.plots[i]={crop:c,end:Date.now()+crops[c].time*1000,time:crops[c].time*1000};
  save();
}

function harvest(i){
  state.plots[i]={crop:null,end:0};
  state.points+=5;
  state.task.progress++;

  if(state.task.progress>=state.task.target){
    state.points+=state.task.reward;
    state.task={type:"harvest",target:10,progress:0,reward:100};
  }
  save();
}

function save(){
  localStorage.setItem("winhive",JSON.stringify(state));
  renderHome();
}

/* ===== START ===== */
renderHome();
setInterval(initFarm,1000);
</script>

</body>
</html>  
