<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinHive</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui}
body{background:#000;color:#fff;overflow:hidden}

/* ===== CONTENT ===== */
#content{
  height:calc(100vh - 110px);
  padding:20px;
  overflow:hidden;
}

/* ===== NAV ===== */
.nav-bar{
  position:fixed;
  bottom:0;
  width:100%;
  height:110px;
  background:rgba(15,15,15,.96);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid #222;
}

.nav-btn{
  width:56px;
  height:56px;
  border-radius:50%;
  background:#141414;
  color:#aaa;
  font-size:11px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.nav-btn .icon{font-size:18px}

.home-btn{
  width:78px;
  height:78px;
  margin-top:-18px;
}
.home-btn .icon{font-size:30px}

.nav-btn.active{
  color:#fff;
  box-shadow:0 0 18px rgba(255,200,0,.35);
}

/* ===== FARM ===== */
.card{
  background:#0e0e0e;
  border-radius:20px;
  padding:18px;
  margin-bottom:15px;
}

.header{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin-bottom:10px;
}

.center{text-align:center}

.farm{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  margin-top:15px;
}

.plot{
  background:#1a1a1a;
  border-radius:14px;
  height:90px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  cursor:pointer;
}

.task{
  background:#111;
  border-radius:14px;
  padding:14px;
  margin-top:12px;
  font-size:14px;
}
.task span{color:#ffcc00}

/* ===== BTN ===== */
.btn{
  background:#1a1a1a;
  border-radius:14px;
  padding:12px;
  text-align:center;
  margin-top:10px;
}
</style>
</head>

<body>

<div id="content"></div>

<!-- ===== NAV ===== -->
<div class="nav-bar">
  <div class="nav-btn" onclick="go('settings',this)">âš™ï¸<div>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div></div>
  <div class="nav-btn" onclick="go('vip',this)">â­<div>VIP</div></div>
  <div class="nav-btn" onclick="go('wallet',this)">ğŸ’¼<div>Ø§Ù„Ù…Ø­ÙØ¸Ø©</div></div>
  <div class="nav-btn home-btn active" onclick="go('home',this)">ğŸ <div>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div></div>
  <div class="nav-btn" onclick="go('tasks',this)">ğŸ“‹<div>Ø§Ù„Ù…Ù‡Ø§Ù…</div></div>
  <div class="nav-btn" onclick="go('ref',this)">ğŸ‘¥<div>Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</div></div>
  <div class="nav-btn" onclick="go('logs',this)">ğŸ§¾<div>Ø§Ù„Ø³Ø¬Ù„Ø§Øª</div></div>
</div>

<script>
Telegram.WebApp.ready();

/* ===== STATE ===== */
let points = Number(localStorage.getItem("points")||0);
let plots = JSON.parse(localStorage.getItem("plots")||"[0,0,0,0]");
let task = localStorage.getItem("task") || "Ø§Ø²Ø±Ø¹ Ø£Ø±Ø¶ ÙˆØ§Ø­Ø¯Ø©";

/* ===== HOME ===== */
function renderHome(){
document.getElementById("content").innerHTML=`
<div class="card">
  <div class="header">
    <div>ğŸ‘‘ VIP: 0</div>
    <div>ğŸ’° Ø§Ù„Ù†Ù‚Ø§Ø·: ${points}</div>
  </div>

  <div class="center">
    <h2>ğŸŒ¾ WinHive</h2>
  </div>

  <div class="farm">
    ${plots.map((p,i)=>`
      <div class="plot" onclick="action(${i})">
        ${p==0?"ğŸŸ«":p==1?"ğŸŒ±":"ğŸŒ¾"}
      </div>`).join("")}
  </div>

  <div class="task">
    ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø©: <span>${task}</span>
  </div>
</div>
`;
}

/* ===== ACTION ===== */
function action(i){
 if(plots[i]==0){
   plots[i]=1;
   checkTask("plant");
 }
 else if(plots[i]==1){
   plots[i]=2;
 }
 else{
   plots[i]=0;
   points+=2;
   checkTask("harvest");
 }
 save();
 renderHome();
}

/* ===== TASK LOGIC ===== */
function checkTask(type){
 if(task.includes("Ø§Ø²Ø±Ø¹") && type=="plant"){
   points+=1;
   task="Ø§Ø­ØµØ¯ Ù…Ø­ØµÙˆÙ„ ÙˆØ§Ø­Ø¯";
 }
 else if(task.includes("Ø§Ø­ØµØ¯") && type=="harvest"){
   points+=2;
   task="Ø§Ø²Ø±Ø¹ Ø£Ø±Ø¶ ÙˆØ§Ø­Ø¯Ø©";
 }
}

/* ===== SAVE ===== */
function save(){
 localStorage.setItem("points",points);
 localStorage.setItem("plots",JSON.stringify(plots));
 localStorage.setItem("task",task);
}

/* ===== NAV ===== */
function go(page,el){
 document.querySelectorAll(".nav-btn").forEach(b=>b.classList.remove("active"));
 el.classList.add("active");
 if(page=="home") renderHome();
 else document.getElementById("content").innerHTML=`<div class="center">${page}</div>`;
}

renderHome();
</script>

</body>
</html>
