<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinHive</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:system-ui;
}

body{
  background:#000;
  color:#fff;
  overflow:hidden;
}

/* ===== CONTENT ===== */
#content{
  height:calc(100vh - 110px);
  padding:20px;
  overflow:hidden;
  transition:opacity .3s ease, transform .3s ease;
}

/* ===== NAV BAR ===== */
.nav-bar{
  position:fixed;
  bottom:0;
  width:100%;
  height:110px;
  background:rgba(15,15,15,0.96);
  backdrop-filter:blur(12px);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid #222;
}

/* ===== BUTTON ===== */
.nav-btn{
  width:56px;
  height:56px;
  border-radius:50%;
  background:#141414;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:#aaa;
  font-size:11px;
  transition:all .25s ease;
}

.nav-btn .icon{
  font-size:18px;
  margin-bottom:3px;
}

/* ===== HOME BUTTON (BIGGER) ===== */
.home-btn{
  width:78px;
  height:78px;
  margin-top:-18px;
}

.home-btn .icon{
  font-size:30px;
}

/* ===== ACTIVE (YELLOW GLOW SOFT) ===== */
.nav-btn.active{
  color:#fff;
  box-shadow:
    0 0 16px rgba(255,200,0,.35),
    0 0 28px rgba(255,200,0,.15);
}

/* ===== PRESS EFFECT ===== */
.nav-btn:active{
  transform:scale(.92);
}
</style>
</head>

<body>

<div id="content"></div>

<!-- ===== NAV BAR (7 MENUS â€“ Ù…Ø­ÙÙˆØ¸Ø©) ===== -->
<div class="nav-bar">

  <div class="nav-btn" onclick="go('settings',this)">
    <div class="icon">âš™ï¸</div>
    Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
  </div>

  <div class="nav-btn" onclick="go('vip',this)">
    <div class="icon">â­</div>
    VIP
  </div>

  <div class="nav-btn" onclick="go('wallet',this)">
    <div class="icon">ğŸ’¼</div>
    Ø§Ù„Ù…Ø­ÙØ¸Ø©
  </div>

  <div class="nav-btn home-btn active" onclick="go('home',this)">
    <div class="icon">ğŸ </div>
    Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
  </div>

  <div class="nav-btn" onclick="go('tasks',this)">
    <div class="icon">ğŸ“‹</div>
    Ø§Ù„Ù…Ù‡Ø§Ù…
  </div>

  <div class="nav-btn" onclick="go('ref',this)">
    <div class="icon">ğŸ‘¥</div>
    Ø§Ù„Ø¥Ø­Ø§Ù„Ø©
  </div>

  <div class="nav-btn" onclick="go('logs',this)">
    <div class="icon">ğŸ§¾</div>
    Ø§Ù„Ø³Ø¬Ù„Ø§Øª
  </div>

</div>
<script>
Telegram.WebApp.ready();

/* ===== STATE ===== */
let currentPage = 'home';

/* ===== PAGE CONTENT ===== */
const pages = {
  home: `
    <div style="text-align:center;margin-top:40px">
      <h2>ğŸŒ¾ WinHive</h2>
      <p style="opacity:.6;margin-top:10px">
        Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ ÙÙŠ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©
      </p>
    </div>
  `,

  tasks: `
    <div style="text-align:center;margin-top:40px">
      <h3>ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù…</h3>
      <p style="opacity:.6">Ù‚Ø±ÙŠØ¨Ù‹Ø§â€¦</p>
    </div>
  `,

  wallet: `
    <div style="text-align:center;margin-top:40px">
      <h3>ğŸ’¼ Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
      <p style="opacity:.6">Ø±ØµÙŠØ¯Ùƒ Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§</p>
    </div>
  `,

  vip: `
    <div style="text-align:center;margin-top:40px">
      <h3>â­ VIP</h3>
      <p style="opacity:.6">Ù…Ø³ØªÙˆÙŠØ§Øª VIP Ù…Ù† 1 Ø¥Ù„Ù‰ 10</p>
    </div>
  `,

  ref: `
    <div style="text-align:center;margin-top:40px">
      <h3>ğŸ‘¥ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</h3>
      <p style="opacity:.6">Ø´Ø§Ø±Ùƒ Ø±Ø§Ø¨Ø·Ùƒ</p>
    </div>
  `,

  logs: `
    <div style="text-align:center;margin-top:40px">
      <h3>ğŸ§¾ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</h3>
      <p style="opacity:.6">Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚</p>
    </div>
  `,

  settings: `
    <div style="text-align:center;margin-top:40px">
      <h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
      <p style="opacity:.6">ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø³Ø§Ø¨Ùƒ</p>
    </div>
  `
};

/* ===== NAV FUNCTION ===== */
function go(page, el){
  if(page === currentPage) return;

  currentPage = page;

  document.querySelectorAll('.nav-btn')
    .forEach(b => b.classList.remove('active'));
  el.classList.add('active');

  const c = document.getElementById('content');
  c.style.opacity = 0;
  c.style.transform = 'translateY(10px)';

  setTimeout(() => {
    c.innerHTML = pages[page];
    c.style.opacity = 1;
    c.style.transform = 'translateY(0)';
  }, 180);
}

/* ===== LOAD HOME FIRST ===== */
document.getElementById('content').innerHTML = pages.home;
</script>
<script>
/* ===============================
   FARM GAME STATE
================================ */
let points = Number(localStorage.getItem("points") || 0);
let plots  = JSON.parse(localStorage.getItem("plots") || "[0,0,0,0]");
let task   = localStorage.getItem("task") || "Ø§Ø²Ø±Ø¹ Ø£Ø±Ø¶ ÙˆØ§Ø­Ø¯Ø©";
let timer  = null;
let growIndex = null;

/* ===============================
   FARM PAGE TEMPLATE
================================ */
function farmPage(){
  return `
  <div class="card">
    <div class="header">
      <div>ğŸ’° Ø§Ù„Ù†Ù‚Ø§Ø·: ${points}</div>
      <div>ğŸ‘‘ VIP: 0</div>
    </div>

    <div class="center" style="margin-top:10px">
      <h2>ğŸŒ¾ WinHive</h2>
    </div>

    <div class="farm">
      ${plots.map((p,i)=>`
        <div class="plot" onclick="plotAction(${i})">
          ${p===0?"ğŸŸ«":p===1?"ğŸŒ±":"ğŸŒ¾"}
        </div>
      `).join("")}
    </div>

    <div class="task">
      ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
      <br><span>${task}</span>
    </div>
  </div>
  `;
}

/* ===============================
   PLOT ACTION
================================ */
function plotAction(i){
  if(plots[i] === 0){
    plots[i] = 1;
    startGrow(i);
    checkTask("plant");
  }
  else if(plots[i] === 2){
    plots[i] = 0;
    points += 2;
    checkTask("harvest");
  }
  saveState();
  refreshHome();
}

/* ===============================
   GROW TIMER
================================ */
function startGrow(i){
  if(timer) return;
  growIndex = i;
  timer = setTimeout(()=>{
    plots[growIndex] = 2;
    timer = null;
    saveState();
    refreshHome();
  }, 15000); // 15 Ø«Ø§Ù†ÙŠØ© (ØªØ¬Ø±Ø¨Ø©)
}

/* ===============================
   TASK SYSTEM
================================ */
function checkTask(type){
  if(task.includes("Ø§Ø²Ø±Ø¹") && type==="plant"){
    points += 1;
    task = "Ø§Ø­ØµØ¯ Ù…Ø­ØµÙˆÙ„ ÙˆØ§Ø­Ø¯";
  }
  else if(task.includes("Ø§Ø­ØµØ¯") && type==="harvest"){
    points += 2;
    task = "Ø§Ø²Ø±Ø¹ Ø£Ø±Ø¶ ÙˆØ§Ø­Ø¯Ø©";
  }
}

/* ===============================
   SAVE & REFRESH
================================ */
function saveState(){
  localStorage.setItem("points", points);
  localStorage.setItem("plots", JSON.stringify(plots));
  localStorage.setItem("task", task);
}

function refreshHome(){
  if(currentPage === "home"){
    document.getElementById("content").innerHTML = farmPage();
  }
}

/* ===============================
   OVERRIDE HOME PAGE
================================ */
pages.home = farmPage();
document.getElementById("content").innerHTML = pages.home;
</script>
