<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WinHive</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui}
body{background:#000;color:#fff;overflow:hidden}

#content{
 height:calc(100vh - 110px);
 overflow-y:auto;
 padding:15px;
 transition:.3s
}

/* ===== NAV BAR ===== */
.nav-bar{
 position:fixed;
 bottom:0;
 width:100%;
 height:110px;
 background:rgba(15,15,15,.97);
 display:flex;
 justify-content:space-around;
 align-items:center;
 border-top:1px solid #222;
}
.nav-btn{
 width:58px;height:58px;border-radius:50%;
 background:#141414;color:#aaa;
 display:flex;flex-direction:column;
 align-items:center;justify-content:center;
 font-size:11px;transition:.25s
}
.nav-btn .icon{font-size:20px}
.nav-btn.active{
 color:#fff;
 box-shadow:0 0 18px rgba(255,200,0,.35)
}
.home-btn{width:80px;height:80px;margin-top:-18px}
.home-btn .icon{font-size:30px}
.nav-btn:active{transform:scale(.92)}

/* ===== FARM ===== */
.farm{
 display:grid;
 grid-template-columns:repeat(3,1fr);
 gap:12px;
 margin-top:20px
}
.land{
 background:#1a1a1a;
 border-radius:14px;
 height:100px;
 display:flex;
 align-items:center;
 justify-content:center;
 text-align:center;
 cursor:pointer;
 position:relative
}
.locked{opacity:.3}
.progress{
 position:absolute;
 bottom:6px;
 width:80%;
 height:6px;
 background:#333;
 border-radius:10px;
 overflow:hidden
}
.progress div{
 height:100%;
 background:#f5b400;
 width:0%
}

/* ===== CARD ===== */
.card{
 background:#121212;
 border-radius:18px;
 padding:15px;
 margin-top:15px;
 box-shadow:0 0 25px rgba(255,200,0,.15)
}
.btn{
 background:#1c1c1c;
 padding:12px;
 border-radius:14px;
 text-align:center;
 margin-top:10px;
 cursor:pointer
}
.btn.glow{
 box-shadow:0 0 18px rgba(255,200,0,.4)
}
</style>
</head>

<body>

<div id="content"></div>

<div class="nav-bar">
 <div class="nav-btn" onclick="go('Ø§Ù„Ø³Ø¬Ù„Ø§Øª',this)"><div class="icon">ğŸ§¾</div>Ø§Ù„Ø³Ø¬Ù„Ø§Øª</div>
 <div class="nav-btn" onclick="go('Ø§Ù„Ø¥Ø­Ø§Ù„Ø©',this)"><div class="icon">ğŸ‘¥</div>Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</div>
 <div class="nav-btn" onclick="go('Ø§Ù„Ù…Ù‡Ø§Ù…',this)"><div class="icon">ğŸ“‹</div>Ø§Ù„Ù…Ù‡Ø§Ù…</div>
 <div class="nav-btn home-btn active" onclick="go('Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',this)"><div class="icon">ğŸ </div>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
 <div class="nav-btn" onclick="go('Ø§Ù„Ù…Ø­ÙØ¸Ø©',this)"><div class="icon">ğŸ’¼</div>Ø§Ù„Ù…Ø­ÙØ¸Ø©</div>
 <div class="nav-btn" onclick="go('VIP',this)"><div class="icon">â­</div>VIP</div>
 <div class="nav-btn" onclick="go('Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',this)"><div class="icon">âš™ï¸</div>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
</div>

<script>
Telegram.WebApp.ready();

/* ===== DATA ===== */
let points = 0;
let vip = 0;
let task = {type:"harvest", target:3, progress:0, reward:50};

const crops = {
 wheat:{name:"Ù‚Ù…Ø­ ğŸŒ¾",time:5},
 carrot:{name:"Ø¬Ø²Ø± ğŸ¥•",time:10},
 pepper:{name:"ÙÙ„ÙÙ„ ğŸŒ¶ï¸",time:15}
};

let lands = Array(6).fill().map((_,i)=>({
 state: i===0 ? "empty":"locked",
 crop:null,
 end:0
}));

function vipData(){
 return {lands:1+vip, speed:1-(vip*0.02)};
}

/* ===== HOME ===== */
function home(){
 let html = `
 <div class="card">
 <div style="display:flex;justify-content:space-between">
 <div>ğŸ‘‘ VIP: ${vip}</div>
 <div>ğŸ’° Ø§Ù„Ù†Ù‚Ø§Ø·: ${points}</div>
 </div>
 <h2 style="text-align:center;margin:10px 0">WinHive ğŸŒ¾</h2>
 </div>

 <div class="card">
 <b>ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</b><br>
 ${task.type==="harvest"?"Ø§Ø­ØµØ¯":"Ø§Ø²Ø±Ø¹"} ${task.target} Ù…Ø±Ø§Øª<br>
 Ø§Ù„ØªÙ‚Ø¯Ù…: ${task.progress}/${task.target}<br>
 Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©: ${task.reward} Ù†Ù‚Ø·Ø©
 </div>

 <div class="farm">
 `;

 lands.forEach((l,i)=>{
  if(i>=vipData().lands) html+=`<div class="land locked">ğŸ”’</div>`;
  else if(l.state==="empty") html+=`<div class="land" onclick="openPlant(${i})">ğŸŒ±<br>Ø§Ø²Ø±Ø¹</div>`;
  else if(l.state==="planted"){
   let p = Math.min(100,((Date.now()-(l.end-60000))/(60000))*100);
   html+=`
   <div class="land">
    ${l.crop.name}
    <div class="progress"><div style="width:${p}%"></div></div>
   </div>`;
  }else html+=`<div class="land" onclick="harvest(${i})">ğŸŒ¾<br>Ø§Ø­ØµØ¯</div>`;
 });

 html+="</div>";
 return html;
}

/* ===== ACTIONS ===== */
function openPlant(i){
 let menu = "<div class='card'><b>Ø§Ø®ØªØ± Ù…Ø­ØµÙˆÙ„:</b>";
 Object.keys(crops).forEach(c=>{
  menu+=`<div class='btn' onclick="plant(${i},'${c}')">${crops[c].name}</div>`;
 });
 menu+="</div>";
 content.innerHTML = home()+menu;
}

function plant(i,c){
 let t = crops[c].time*60000*vipData().speed;
 lands[i]={state:"planted",crop:crops[c],end:Date.now()+t};
 taskProgress("plant");
 content.innerHTML=home();
 setTimeout(()=>{
  if(lands[i].state==="planted") lands[i].state="ready";
  content.innerHTML=home();
 },t);
}

function harvest(i){
 lands[i]={state:"empty",crop:null,end:0};
 points+=5;
 taskProgress("harvest");
 content.innerHTML=home();
}

/* ===== TASK ===== */
function taskProgress(type){
 if(task.type!==type) return;
 task.progress++;
 if(task.progress>=task.target){
  points+=task.reward;
  task={type:"harvest",target:5,progress:0,reward:80};
 }
}

/* ===== NAV ===== */
function go(name,el){
 document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
 el.classList.add('active');
 if(name==="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©") content.innerHTML=home();
 else if(name==="VIP") content.innerHTML=`<div class="card">
 <h3>â­ VIP</h3>
 Ù…Ø³ØªÙˆØ§Ùƒ: ${vip}<br>
 <div class="btn glow" onclick="vip++">ØªØ±Ù‚ÙŠØ© VIP (ØªØ¬Ø±Ø¨Ø©)</div>
 </div>`;
 else content.innerHTML=`<div class="card">${name}</div>`;
}

/* START */
content.innerHTML = home();
</script>

</body>
</html>
