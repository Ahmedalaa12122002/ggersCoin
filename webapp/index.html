<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>GgersCoin</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- =========================
         Telegram WebApp (MUST BE FIRST)
    ========================= -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- =========================
         Global Style
    ========================= -->
    <link rel="stylesheet" href="/static/style.css">

    <!-- =========================
         Smart Hide Top Bar
    ========================= -->
    <style>
        .top-bar {
            display: none !important;
        }

        /* ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø¨Ø¯ÙˆÙ† ÙƒØ³Ø± */
        #view {
            height: calc(100vh - 90px) !important;
        }
    </style>
</head>

<body>

<!-- =========================
     Top Bar (Hidden)
========================= -->
<header class="top-bar">
    <h1 id="page-title">ğŸ® Play</h1>
    <span class="top-sub">Ø§Ø²Ø±Ø¹ â€¢ Ø§Ø­ØµØ¯ â€¢ Ø§ÙƒØ³Ø¨ Ù†Ù‚Ø§Ø· ğŸ’°</span>
</header>

<!-- =========================
     SPA View
========================= -->
<main id="view">
    <div class="loader">â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚...</div>
</main>

<!-- =========================
     Bottom Navigation
========================= -->
<nav class="bottom-nav">

    <button class="nav-btn" data-page="log">
        ğŸ§¾ <span>Ø§Ù„Ø³Ø¬Ù„</span>
    </button>

    <button class="nav-btn" data-page="ref">
        ğŸ‘¥ <span>Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</span>
    </button>

    <button class="nav-btn" data-page="tasks">
        ğŸ“‹ <span>Ø§Ù„Ù…Ù‡Ù…Ø§Øª</span>
    </button>

    <button class="nav-btn play-btn active" data-page="play">
        ğŸ® <span>Play</span>
    </button>

    <button class="nav-btn" data-page="vip">
        ğŸ’ <span>VIP</span>
    </button>

    <button class="nav-btn" data-page="wallet">
        ğŸ’° <span>Ø§Ù„Ù…Ø­ÙØ¸Ø©</span>
    </button>

    <button class="nav-btn" data-page="profile">
        ğŸ‘¤ <span>Ø­Ø³Ø§Ø¨ÙŠ</span>
    </button>

</nav>

<!-- =========================
     Telegram Auth (STRICT)
     âš ï¸ Ù„Ø§Ø²Ù… ÙŠÙŠØ¬ÙŠ Ù‚Ø¨Ù„ app.js
========================= -->
<script src="/static/auth.js"></script>

<!-- =========================
     SPA Core
========================= -->
<script src="/static/app.js"></script>

<!-- =========================
     Telegram Init + Global UI
========================= -->
<script>
/* =========================
   Telegram WebApp Init
========================= */
if (window.Telegram && Telegram.WebApp) {
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
} else {
    document.documentElement.innerHTML = `
        <html lang="ar" dir="rtl">
        <head><meta charset="UTF-8"></head>
        <body style="
            margin:0;
            display:flex;
            align-items:center;
            justify-content:center;
            height:100vh;
            background:#000;
            color:#fff;
            font-family:system-ui,sans-serif;
            text-align:center;
        ">
            <div>
                <h2>ğŸš« ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­</h2>
                <p>Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ù…Ù† Ø¯Ø§Ø®Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… ÙÙ‚Ø·</p>
            </div>
        </body>
        </html>
    `;
}

/* =========================
   Global App Settings
========================= */
window.AppSettings = window.AppSettings || {
    vibration: true,
    theme: "dark"
};

/* =========================
   Apply Theme (Ù…Ø±ÙƒØ²ÙŠ)
========================= */
function applyTheme() {
    document.body.classList.toggle(
        "light",
        window.AppSettings.theme === "light"
    );
}
applyTheme();

/* =========================
   Ripple + Vibration (Global)
========================= */
document.querySelectorAll(".nav-btn").forEach(btn => {
    btn.addEventListener("click", () => {

        // Ripple
        btn.classList.remove("ripple");
        void btn.offsetWidth;
        btn.classList.add("ripple");

        // Vibration
        if (navigator.vibrate && window.AppSettings.vibration) {
            navigator.vibrate(15);
        }
    });
});

/* =========================
   Basic Client Protection
========================= */
document.addEventListener("contextmenu", e => e.preventDefault());
</script>

</body>
    </html>
