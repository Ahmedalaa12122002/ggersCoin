<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>GgersCoin</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- =========================
         Telegram WebApp (MUST BE FIRST)
    ========================= -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- =========================
         Global Style
    ========================= -->
    <link rel="stylesheet" href="/static/style.css">

    <!-- =========================
         Smart Hide Top Bar
    ========================= -->
    <style>
        .top-bar {
            display: none !important;
        }

        /* ุชุนููุถ ุงููุณุงุญุฉ ุจุฏูู ูุณุฑ */
        #view {
            height: calc(100vh - 90px) !important;
        }
    </style>
</head>

<body>

<!-- =========================
     Top Bar (Hidden)
========================= -->
<header class="top-bar">
    <h1 id="page-title">๐ฎ Play</h1>
    <span class="top-sub">ุงุฒุฑุน โข ุงุญุตุฏ โข ุงูุณุจ ููุงุท ๐ฐ</span>
</header>

<!-- =========================
     SPA View
========================= -->
<main id="view">
    <div class="loader">โณ ุฌุงุฑู ุชุญููู ุงูุชุทุจูู...</div>
</main>

<!-- =========================
     Bottom Navigation
========================= -->
<nav class="bottom-nav">

    <button class="nav-btn" data-page="log">
        ๐งพ <span>ุงูุณุฌู</span>
    </button>

    <button class="nav-btn" data-page="ref">
        ๐ฅ <span>ุงูุฅุญุงูุฉ</span>
    </button>

    <button class="nav-btn" data-page="tasks">
        ๐ <span>ุงููููุงุช</span>
    </button>

    <button class="nav-btn play-btn active" data-page="play">
        ๐ฎ <span>Play</span>
    </button>

    <button class="nav-btn" data-page="vip">
        ๐ <span>VIP</span>
    </button>

    <button class="nav-btn" data-page="wallet">
        ๐ฐ <span>ุงููุญูุธุฉ</span>
    </button>

    <button class="nav-btn" data-page="profile">
        ๐ค <span>ุญุณุงุจู</span>
    </button>

</nav>

<!-- =========================
     Telegram Auth (STRICT)
     โ๏ธ ูุงุฒู ููุฌู ูุจู app.js
========================= -->
<script src="/static/auth.js"></script>

<!-- =========================
     SPA Core
========================= -->
<script src="/static/app.js"></script>

<!-- =========================
     Telegram Init + Global UI
========================= -->
<script>
/* =========================
   Telegram WebApp Init
========================= */
if (window.Telegram && Telegram.WebApp) {
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
} else {
    document.documentElement.innerHTML = `
        <html lang="ar" dir="rtl">
        <head>
            <meta charset="UTF-8">
            <title>ุบูุฑ ูุณููุญ</title>
        </head>
        <body style="
            margin:0;
            display:flex;
            align-items:center;
            justify-content:center;
            height:100vh;
            background:#000;
            color:#fff;
            font-family:system-ui,sans-serif;
            text-align:center;
        ">
            <div>
                <h2>๐ซ ุบูุฑ ูุณููุญ</h2>
                <p>ูุฐุง ุงูุชุทุจูู ูุนูู ูู ุฏุงุฎู ุชูููุฌุฑุงู ููุท</p>
            </div>
        </body>
        </html>
    `;
}

/* =========================
   Global App Settings
========================= */
window.AppSettings = window.AppSettings || {
    vibration: true,
    theme: "dark"
};

/* =========================
   Apply Theme (ูุฑูุฒู)
========================= */
function applyTheme() {
    document.body.classList.toggle(
        "light",
        window.AppSettings.theme === "light"
    );
}
applyTheme();

/* =========================
   Ripple + Vibration (Global)
========================= */
document.querySelectorAll(".nav-btn").forEach(btn => {
    btn.addEventListener("click", () => {

        // Ripple
        btn.classList.remove("ripple");
        void btn.offsetWidth;
        btn.classList.add("ripple");

        // Vibration
        if (navigator.vibrate && window.AppSettings.vibration) {
            navigator.vibrate(15);
        }
    });
});

/* =========================
   Basic Client Protection
========================= */
document.addEventListener("contextmenu", e => e.preventDefault());
</script>

</body>
    </html>
